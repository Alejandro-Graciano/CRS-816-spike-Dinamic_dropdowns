<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous">
    <title>Dinamic Sample</title>
  </head>

  <body>
    <div class="header">
      <h3 class="text-center">Dynamic Dropdowns Sample</h3>
    </div>
    <form class="p-3" id="group">
      <div class="row justify-content-center">
        <div class="col-4">
          <label>Chose a team member</label>
          <select class="form-control" id="dp1">
            {% for o in all_members %}
            <option value="{{ o }}">{{ o }}</option>
            {% endfor %}
          </select>
          <!-- <input list="all_classes" name="dropdown1" type="search"/>
          <datalist id="all_classes">
            {% for o in all_classes %}
            <option value="{{ o }}">{{ o }}</option>
            {% endfor %}
          </datalist> -->
        </div>
        <div class="col-4">
          <label>Chose a spoken language</label>
          <select class="form-control" id="dp2">
            {% for o in all_langs %}
            <option value="{{ o }}">{{ o }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-4">
          <label>Chose a country</label>
          <select class="form-control" id="dp3">
            {% for o in all_countries %}
            <option value="{{ o }}">{{ o }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <br>
      <div class="row justify-content-center">
        <button class='btn btn-outline-info' type='button' id="print">PRINT</button>
        <br>
        <h4 id="print_txt" class="text-center">{{print_txt}}</h4>
      </div>
      <br>
      <br>
      <div class="row justify-content-center">
        <button class='btn btn-outline-danger' type='reset' id="reset">RESET</button>
      </div>
    </form>

    <script src="https://code.jquery.com/jquery-1.12.4.js"
      type="text/javascript"></script>

    <script type="text/javascript">
      $(document).ready(
        function () {
          // first dropdown box
          $('#dp1').change(
            function () {
              $.getJSON(
                '/_dp', {
                  call: "member",
                  member: $('#dp1').val(),
                  lang: $('#dp2').val(),
                  country: $('#dp3').val()
                }
              ).success(
                function (data) {
                  $('#dp1').html(data.dp1_data),
                  $('#dp2').html(data.dp2_data),
                  $('#dp3').html(data.dp3_data);
                }
              )
            }
          );
          //dropdown box
          $('#dp2').change(
            function () {
              $.getJSON(
                '/_dp', {
                  call: "lang",
                  member: $('#dp1').val(),
                  lang: $('#dp2').val(),
                  country: $('#dp3').val()
                }
              ).success(
                function (data) {
                  $('#dp1').html(data.dp1_data),
                  $('#dp2').html(data.dp2_data),
                  $('#dp3').html(data.dp3_data);
                }
              )
            }
          );
          //end dp
          //dropdown box
          $('#dp3').change(
            function () {
              $.getJSON(
                '/_dp', {
                  call: "country",
                  member: $('#dp1').val(),
                  lang: $('#dp2').val(),
                  country: $('#dp3').val()
                }
              ).success(
                function (data) {
                  $('#dp1').html(data.dp1_data),
                  $('#dp2').html(data.dp2_data),
                  $('#dp3').html(data.dp3_data);
                }
              )
            }
          );
          //end dp
          //reset button
          $('#reset').bind('click',
            function () {
              $.getJSON(
                '/_dp', {
                  call: "reset",
                  member: $('#dp1').val(),
                  lang: $('#dp2').val(),
                  country: $('#dp3').val()
                }
              ).success(
                function (data) {
                  $('#dp1').html(data.dp1_data),
                  $('#dp2').html(data.dp2_data),
                  $('#dp3').html(data.dp3_data);
                }
              )
            }
          );
          //end
          //print button
          $('#print').bind('click',
            function () {
              $.getJSON(
                '/_dp', {
                  call: "print",
                  member: $('#dp1').val(),
                  lang: $('#dp2').val(),
                  country: $('#dp3').val()
                }
              ).success(
                function (data) {
                  $('#print_txt').html(data.print_txt)
                }
              )
            }
          );
          //end
        }     
      );
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"></script>
  </body>

</html>